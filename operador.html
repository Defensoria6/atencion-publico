<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Operador - Defensoría Civil y Comercial 6</title>
  <style>
    :root {
      --bg: #f4f6f9;
      --card: #ffffffcc;
      --accent: #007aff; /* estilo macOS */
      --accent-dark: #0051a8;
      --text: #1c1c1e;
      --muted: #6e6e73;
      --radius: 12px;
      --shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      padding: 20px;
    }
    h1,h2 { font-weight:600; }
    .container {
      max-width: 1100px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .header {
      background: var(--card);
      padding: 24px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      text-align: center;
      backdrop-filter: blur(8px);
    }
    .header h1 { font-size: 22px; margin-bottom: 6px; }
    .header p { color: var(--muted); font-size: 14px; }

    .status-bar {
      background: var(--card);
      padding: 14px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
    }
    .status-indicator {
      width: 10px; height: 10px;
      border-radius: 50%;
    }
    .status-open { background:#34c759; }
    .status-closed { background:#ff3b30; }

    .main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      backdrop-filter: blur(8px);
    }
    .card h2 {
      font-size: 16px;
      margin-bottom: 14px;
      border-bottom: 1px solid #e5e5ea;
      padding-bottom: 6px;
    }

    label {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 6px;
      display:block;
    }
    input,select,textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d2d2d7;
      border-radius: 8px;
      background: #fff;
      font-size: 14px;
      transition: border .2s, box-shadow .2s;
    }
    input:focus,select:focus,textarea:focus {
      border-color: var(--accent);
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,122,255,.2);
    }
    .form-group { margin-bottom: 14px; }

    .btn {
      display: inline-block;
      background: linear-gradient(to bottom, #ffffff, #f0f0f5);
      border: 1px solid #c7c7cc;
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all .2s;
      box-shadow: inset 0 1px 0 #fff, 0 1px 2px rgba(0,0,0,.05);
    }
    .btn:hover {
      background: linear-gradient(to bottom, #f9f9fb, #e9e9ef);
    }
    .btn:active {
      background: #d1d1d6;
      transform: translateY(1px);
    }
    .btn-primary {
      background: linear-gradient(to bottom, var(--accent), var(--accent-dark));
      color: #fff;
      border: none;
      box-shadow: 0 2px 4px rgba(0,0,0,.2);
    }
    .btn-primary:hover {
      background: linear-gradient(to bottom, #3395ff, #0064d2);
    }

    .alert {
      background:#fffbe6;
      color:#8c6d1f;
      border:1px solid #ffe58f;
      padding:12px 16px;
      border-radius: var(--radius);
      font-size:14px;
      display:none;
    }

    .stats {
      display:grid;
      grid-template-columns: repeat(2,1fr);
      gap:14px;
    }
    .stat-box {
      background:#f9f9fb;
      border-radius: var(--radius);
      padding:16px;
      text-align:center;
    }
    .stat-number {
      font-size:20px;
      font-weight:600;
    }
    .stat-label { font-size:12px; color:var(--muted); }

    .records-table {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .table-header {
      background: #f2f2f7;
      padding: 14px 18px;
      font-weight: 600;
      border-bottom:1px solid #e5e5ea;
    }
    .table-content {
      max-height: 300px;
      overflow-y:auto;
    }
    .record {
      display:grid;
      grid-template-columns: 80px 100px 1fr 1fr;
      padding: 10px 16px;
      font-size:14px;
      border-bottom:1px solid #f0f0f5;
    }
    .record:hover { background:#fafafa; }
    .record-time { font-weight:500; color:var(--accent); }
    .record-type {
      font-size:12px;
      padding:2px 6px;
      border-radius:6px;
      text-align:center;
      font-weight:500;
    }
    .type-presencial { background:#eaf9ea; color:#34c759; }
    .type-telefonica { background:#fff8e6; color:#ff9500; }
    .type-whatsapp { background:#f3e8ff; color:#af52de; }

    @media(max-width:768px){
      .main { grid-template-columns:1fr; }
      .record { grid-template-columns:1fr; gap:6px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Sistema Operador</h1>
      <p>Defensoría Civil y Comercial 6 · Poder Judicial de Misiones</p>
    </div>

    <div class="status-bar">
      <span id="statusIndicator" class="status-indicator"></span>
      <span id="statusText"></span>
      <span id="currentTime"></span>
    </div>

    <div id="closedAlert" class="alert">
      La oficina está cerrada. Horario: Lunes a Viernes de 7:00 a 12:00 hs.
    </div>

    <div class="main">
      <div class="card">
        <h2>Registrar Atención</h2>
        <form id="attentionForm">
          <div class="form-group">
            <label for="personName">Nombre de la Persona</label>
            <input type="text" id="personName" required>
          </div>
          <div class="form-group">
            <label for="attentionType">Tipo de Atención</label>
            <select id="attentionType" required>
              <option value="">Seleccionar</option>
              <option value="presencial">Presencial</option>
              <option value="telefonica">Telefónica</option>
              <option value="whatsapp">WhatsApp</option>
            </select>
          </div>
          <div class="form-group">
            <label for="assignedUser">Usuario Asignado</label>
            <select id="assignedUser" required></select>
          </div>
          <div class="form-group">
            <label for="description">Descripción del Caso</label>
            <textarea id="description" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Registrar</button>
        </form>
      </div>

      <div class="card">
        <h2>Estadísticas del Día</h2>
        <div class="stats">
          <div class="stat-box">
            <div id="totalAttentions" class="stat-number">0</div>
            <div class="stat-label">Total</div>
          </div>
          <div class="stat-box">
            <div id="presentialCount" class="stat-number">0</div>
            <div class="stat-label">Presenciales</div>
          </div>
          <div class="stat-box">
            <div id="phoneCount" class="stat-number">0</div>
            <div class="stat-label">Telefónicas</div>
          </div>
          <div class="stat-box">
            <div id="whatsappCount" class="stat-number">0</div>
            <div class="stat-label">WhatsApp</div>
          </div>
        </div>
      </div>
    </div>

    <div class="records-table">
      <div class="table-header">Registro de Atenciones</div>
      <div id="recordsContainer" class="table-content">
        <div style="padding:30px;text-align:center;color:var(--muted)">
          No hay registros para mostrar
        </div>
      </div>
    </div>
  </div>

  <script>
    const users = ["Bazante Nadia Romina","Boillat Cesar Enrique","Cardozo Maria Raquel","Cedron Noelia Aurora","Corrales Alicia Mariela","Escobar Monica Graciela","Fioravante Romulo","Gonzalez Alberto Misael","Gonzalez Juan Jose","Gudiño Natalia Esther","Magnani Enzo Luciano","Pablos Patricia","Palacios Ana Gabriela","Ortega Lucia Noemi","Ramos Marcelo Gustavo","Riveros Patricia Soledad","Sosa Rita Cecilia"];
    let dailyRecords = [];
    let stats = { total:0, presencial:0, telefonica:0, whatsapp:0 };

    function init(){
      const sel=document.getElementById("assignedUser");
      users.forEach(u=>{let o=document.createElement("option");o.value=u;o.textContent=u;sel.appendChild(o);});
      updateClock(); updateStatus(); updateStats();
      setInterval(()=>{updateClock();updateStatus();},60000);
    }
    function updateClock(){
      const now=new Date();
      document.getElementById("currentTime").textContent="· "+now.toLocaleTimeString('es-AR',{hour:'2-digit',minute:'2-digit'});
    }
    function isOpen(){
      const n=new Date(), d=n.getDay(), h=n.getHours();
      return d>=1&&d<=5&&h>=7&&h<12;
    }
    function updateStatus(){
      const ind=document.getElementById("statusIndicator");
      const txt=document.getElementById("statusText");
      const alert=document.getElementById("closedAlert");
      const form=document.getElementById("attentionForm");
      if(isOpen()){
        ind.className="status-indicator status-open";
        txt.textContent="Oficina Abierta";
        alert.style.display="none";
        form.querySelectorAll("input,select,textarea,button").forEach(el=>el.disabled=false);
      }else{
        ind.className="status-indicator status-closed";
        txt.textContent="Oficina Cerrada";
        alert.style.display="block";
        form.querySelectorAll("input,select,textarea,button").forEach(el=>el.disabled=true);
      }
    }
    function updateStats(){
      document.getElementById("totalAttentions").textContent=stats.total;
      document.getElementById("presentialCount").textContent=stats.presencial;
      document.getElementById("phoneCount").textContent=stats.telefonica;
      document.getElementById("whatsappCount").textContent=stats.whatsapp;
    }
    function addRecord(r){
      const c=document.getElementById("recordsContainer");
      if(dailyRecords.length===1) c.innerHTML="";
      const div=document.createElement("div");
      div.className="record";
      div.innerHTML=`
        <div class="record-time">${r.time}</div>
        <div class="record-type type-${r.type}">${r.type[0].toUpperCase()+r.type.slice(1)}</div>
        <div><strong>${r.personName}</strong></div>
        <div>${r.assignedUser}</div>`;
      c.insertBefore(div,c.firstChild);
    }
    document.getElementById("attentionForm").addEventListener("submit",e=>{
      e.preventDefault();
      if(!isOpen()){alert("Oficina cerrada.");return;}
      const now=new Date();
      const rec={time:now.toLocaleTimeString('es-AR',{hour:'2-digit',minute:'2-digit'}),personName:personName.value,type:attentionType.value,assignedUser:assignedUser.value,description:description.value};
      dailyRecords.push(rec);
      stats.total++; stats[rec.type]++;
      addRecord(rec); updateStats();
      e.target.reset();
    });
    document.addEventListener("DOMContentLoaded",init);
  </script>
</body>
</html>

